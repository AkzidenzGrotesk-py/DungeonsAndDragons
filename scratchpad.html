<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Quickbox</title>
		<style>
			#textbox, body, html {
				width: 100%; height: 100%;box-sizing: border-box;margin: 0;padding: 16px;font-family: SF Mono, monospace;font-size: 16px;background: #161424; color: #fff;border: 0px;
			}
			#textbox:active {border: 0px;}
		</style>
	</head>
	<body>
		<textarea id = "textbox">Goblin A: 15
Try typing "-/+/*// 2" beside the goblin and press CTRL.
Cannot handle negatives and decimals.</textarea>
		<script type="text/javascript">
			document.addEventListener('keydown', (event) => {
				if (event.key == 'Control') {
					let content = document.getElementById('textbox').value;
					var lines = content.split("\n");
					
					for (var i = 0; i < lines.length; i++) {
						let fn = "";
						let sn = "";
						let op = "";
						let fp = 0;
						let k = 1;
						for (var j = 0; j < lines[i].length; j++) {
							if (lines[i][j].match(/[a-zA-z: ]+/)) {continue;}
							if (lines[i][j].match(/[+-/*]+/)) {
								op = lines[i][j].match(/[+-/*]+/);
								if (k == 1){ k = 2;}
								else if (k == 2) {k = 1;}
							}
							
							if (lines[i][j].match(/[0-9]+/)) {
								if (k == 1) {
									let c = lines[i][j].match(/[0-9]+/);
									if (fn == "") fp = j;
									fn += c;
								} else if (k == 2) {
									let c = lines[i][j].match(/[0-9]+/);
									sn += c;
								}
							}
						}
						
						if (fn != "" && op != "" && sn != "") {
							if (op == "+") fn = parseInt(fn) + parseInt(sn);
							if (op == "-") fn = parseInt(fn) - parseInt(sn);
							if (op == "*") fn = parseInt(fn) * parseInt(sn);
							if (op == "/") fn = parseInt(fn) / parseInt(sn);
							lines[i] = lines[i].substring(0, fp)
							lines[i] += fn;
						}
						
						// console.log("vals " + fn + " (" + fp + ") " + op + " " + sn);
						// console.log(i + ": " + lines[i]);
					}
					document.getElementById('textbox').value = lines.join('\n');
				}
			});
		</script>
	</body>
</html>
